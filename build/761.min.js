"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[761],{761:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(172),i=r(136),o=r(920),a={id:"modal-feedback"},l=(0,n.QD)("h3",null,"Напишите отзыв о товаре",-1),u={class:"inputs-container"},s=["disabled"],c=(0,n.QD)("div",{class:"decr"}," Нажимая на кнопку «Написать отзыв», вы соглашаетесь на обработку персональных данных, а также с политикой конфиденциальности ",-1);var d=r(304),p=["disabled"],f={class:"drop-zoon__text-wrap"},m=[(0,n.QD)("p",{class:"drop-zoon__paragraph"}," Нажмите, чтобы добавить файлы к сообщению ",-1),(0,n.QD)("p",{class:"drop-zoon__comment"}," Можно добавить до 5 файлов с разрешением jpg, jpeg, gif, png и размером до 512Кбайт ",-1)],g={key:0,class:"dropZoon__img-container"},v=["src"],b=["onClick"],h=[(0,n.QD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none"},[(0,n.QD)("path",{d:"M1 1L7.2 7.2",stroke:"#1E1E1E","stroke-width":"1.45","stroke-linecap":"round"}),(0,n.QD)("path",{d:"M1 7.2L7.2 1",stroke:"#1E1E1E","stroke-width":"1.45","stroke-linecap":"round"})],-1)];var y={mixins:[r(704).c],data:function(){return{uploadImg:[]}},computed:{imgsLength:function(){return this.uploadImg.length<5}},directives:{tabindex:{inserted:function(e){e.setAttribute("tabindex",0)}}},methods:{onFileChange:function(e){if(this.uploadImg.length<5){var t=e.target.files||e.dataTransfer.files;if(t[0].size>512e3)return void alert("Максимальный размер файла 512Кбайт");if(!t.length)return;this.createImage(t[0]),e.target.value=""}else e.preventDefault()},createImage:function(e){var t=new FileReader,r=this;t.onload=function(t){r.uploadImg.push({id:Date.now(),name:e.name,size:e.size,src:t.target.result})},t.readAsDataURL(e)},deleteImg:function(e){var t=this.uploadImg.findIndex((function(t){return t.id==e}));t>=0&&this.uploadImg.splice(t,1)}}},w=r(616);const x=(0,w.c)(y,[["render",function(e,t,r,a,l,u){var s=(0,n.iS)("tabindex");return(0,n.Wz)(),(0,n.An)("div",{id:"uploadArea",class:(0,o.WN)(["upload-area",{"upload-area_enabel":u.imgsLength}])},[(0,n.wt)((0,n.QD)("input",{onChange:t[0]||(t[0]=function(){return u.onFileChange&&u.onFileChange.apply(u,arguments)}),type:"file",class:"drop-zoon__file-input",accept:"image/*",disabled:!u.imgsLength},null,40,p),[[s]]),(0,n.K2)(i.Ox,{name:"collapse",onBeforeEnter:e.beforeEnter,onEnter:e.enter,onBeforeLeave:e.beforeLeave,onLeave:e.leave,persisted:""},{default:(0,n.Ql)((function(){return[(0,n.wt)((0,n.QD)("div",f,m,512),[[i.Ub,u.imgsLength]])]})),_:1},8,["onBeforeEnter","onEnter","onBeforeLeave","onLeave"]),(0,n.K2)(i.Ox,{name:"collapse",onBeforeEnter:e.beforeEnter,onEnter:e.enter,onBeforeLeave:e.beforeLeave,onLeave:e.leave},{default:(0,n.Ql)((function(){return[l.uploadImg.length?((0,n.Wz)(),(0,n.An)("div",g,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(l.uploadImg,(function(e){return(0,n.Wz)(),(0,n.An)("div",{key:e.id,class:"dropZoon__img-item",onClick:t[1]||(t[1]=(0,i.Y7)((function(){}),["prevent"]))},[(0,n.QD)("img",{style:{width:"100",height:"100"},class:"Image-input__image",src:e.src},null,8,v),(0,n.QD)("button",{onClick:(0,i.Y7)((function(t){return u.deleteImg(e.id)}),["prevent"])},h,8,b)])})),128))])):(0,n.g1)("v-if",!0)]})),_:1},8,["onBeforeEnter","onEnter","onBeforeLeave","onLeave"])],2)}]]);var E=x;function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){var n;return n=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==D(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L={data:function(){return{email:"",text:"",name:"",errors:{email:!1,text:!1}}},directives:{tabindex:{inserted:function(e){e.setAttribute("tabindex",0)}}},computed:(0,d.gV)(["getModalFeedback"]),methods:O(O({validateForm:function(){this.emailError(),this.textError();var e=!0;for(var t in this.errors)this.errors[t]&&(e=!1);e&&(this.writeReview(),Fancybox.close())}},(0,d.sR)(["writeReview"])),{},{emailError:function(){/^[^@]+@\w+(\.\w+)+\w$/.test(this.email)?this.errors.email=!1:(this.errors.email=!0,alert("Email указан не корректно"))},textError:function(){this.text.length<10?(this.errors.text=!0,alert("Отзыв должен содержать минимум 10 символов")):this.errors.text=!1}}),components:{InputFile:E}};var _=(0,w.c)(L,[["render",function(e,t,r,d,p,f){var m=(0,n.E1)("input-file"),g=(0,n.iS)("tabindex");return(0,n.Wz)(),(0,n.An)("div",a,[e.getModalFeedback?((0,n.Wz)(),(0,n.An)(n.ae,{key:0},[l,(0,n.QD)("div",null,[(0,n.QD)("div",u,[(0,n.wt)((0,n.QD)("input",{class:"my-input my-input-name","aria-label":"Ваше имя",type:"text",autocomplete:"off",placeholder:"Ваше имя","onUpdate:modelValue":t[0]||(t[0]=function(e){return p.name=e})},null,512),[[i.Og,p.name]]),(0,n.wt)((0,n.QD)("input",{class:(0,o.WN)(["my-input my-input-email",p.errors.email?"my-input--error":""]),"aria-label":"Ваш e-mail",type:"email",autocomplete:"off",placeholder:"Ваш e-mail","onUpdate:modelValue":t[1]||(t[1]=function(e){return p.email=e}),onClick:t[2]||(t[2]=function(e){return p.errors.email=!1})},null,2),[[i.Og,p.email]]),(0,n.wt)((0,n.K2)(m,{class:"my-input-file"},null,512),[[g]]),(0,n.wt)((0,n.QD)("textarea",{class:(0,o.WN)(["my-input my-input-textaria",p.errors.text?"my-input--error":""]),"aria-label":"Ваш отзыв",type:"email",placeholder:"Ваш отзыв...",rows:"7","onUpdate:modelValue":t[3]||(t[3]=function(e){return p.text=e}),style:{resize:"none"},onClick:t[4]||(t[4]=function(e){return p.errors.text=!1})},null,2),[[i.Og,p.text]]),(0,n.QD)("button",{disabled:!(this.text&&this.email&&this.name||p.errors.email||p.errors.text),onClick:t[5]||(t[5]=function(e){return f.validateForm()}),class:"button"}," Написать отзыв ",8,s)])]),c],64)):(0,n.g1)("v-if",!0)])}]])}}]);